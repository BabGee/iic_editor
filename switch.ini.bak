[uwsgi]
chdir=/srv/applications/switch
module = switch.wsgi:application

master = true
listen = 32768

lazy = true 
max-requests = 200
processes = 20
#threads = 10
enable-threads = true
max-worker-lifetime = 600

http-timeout = 3600000

post-buffering = 1
harakiri = 600

ignore-sigpipe = true
ignore-write-errors = true
disable-write-exception = true

http-timeout = 600
socket-timeout = 600
worker-reload-mercy = 600
reload-mercy = 600
mule-reload-mercy = 600

max-fd = 32768
uid = system

socket = /run/uwsgi/switch.sock
chown-socket = system:system
chmod-socket = 666
socket-timeout = 600

vacuum = true

die-on-term = true

no-orphans = True
single-interpreter = True
strict = True
#thunder-lock=true
lazy-apps=true

gevent = 100
max-fd = 100000
thunder-lock = serialize accept() usage

cheaper-algo = busyness
cheaper-overload = 90
cheaper-busyness-max = 80
cheaper = 4
cheaper-initial = 4
cheaper-step = 2
